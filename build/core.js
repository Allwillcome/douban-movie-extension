!function(){function e(e,r){n&&"douban-movie"==n.name||(n=chrome.runtime.connect({name:"douban-movie"}),n.onMessage.addListener(function(e){var n=e.url,r=n.search("&key="),s="https://neets.cc/search?page-size=6&type=2&key="+n.substring(r+5),i=e.neetLinks;if(!e.success)return void(a[n].found=!1);a[n].found=!0;for(var o;a[n].tasks.length>0;){o=a[n].tasks.pop();var l=t(s,i);o.parentTag.insertBefore(l,o.parentTag.childNodes[0])}}));var s="https://smartapi.neets.cc/full-texts/grab-datas?pageNo=1&pageSize=10&seriesSize=9&themeSize=3&key="+e;a[s]||(a[s]={tasks:[]}),a[s].found||void 0==a[s].found&&(a[s].tasks.push({parentTag:r}),n.postMessage({url:s}))}function t(e,t){var n=document.createElement("div"),a=document.createElement("h2"),s=document.createElement("a");n.setAttribute("class","gray_ad"),a.innerText="豆瓣电影传送门  · · · · · ·",s.setAttribute("href",r),s.setAttribute("target","_blank"),s.setAttribute("class","report-error"),s.innerText="反馈",n.appendChild(a),n.appendChild(s);var i=document.createElement("ul");i.setAttribute("class","bs");for(var o=0;o<t.length;o++){var l=document.createElement("li"),d=document.createElement("a"),u=document.createElement("span"),c=t[o][1];d.setAttribute("href",t[o][2]),d.setAttribute("target","_blank"),d.setAttribute("class","playBtn"),d.innerHTML=t[o][0],u.setAttribute("class","buylink-price"),c=c.replace(" ",""),u.innerHTML=c||"免费",l.appendChild(d),l.appendChild(u),i.appendChild(l)}var m=document.createElement("li"),p=document.createElement("a");return p.setAttribute("href",e),p.setAttribute("target","_blank"),p.setAttribute("class","playBtn"),p.innerHTML="发现更多>>>",m.appendChild(p),i.appendChild(m),n.appendChild(i),n}var n=null,a={},r="https://github.com/Neulana/douban-movie-extension/issues";!function(){var e=document.createElement("style");e.appendChild(document.createTextNode("")),document.head.appendChild(e);var t={".buylink-price":{left:"130px",position:"absolute",color:"#999"},".gray_ad .report-error":{color:"#999",display:"none",position:"absolute",top:"10px",right:"10px",background:"transparent"},".gray_ad .report-error:hover":{display:"inline"}};for(var n in t){var a=n+"{";for(var r in t[n])a+=r+": "+t[n][r]+";";a+="} ",e.sheet.insertRule(a,0)}}(),"movie.douban.com"===window.location.hostname&&function(){var t=document.getElementsByTagName("h1")[0],n=t.firstElementChild.innerText.split(" ")[0],a=document.getElementsByClassName("aside");if(a&&e(n,a[0]),"book.douban.com"===window.location.hostname){var r=document.getElementsByClassName("nav-items");r&&r[0]&&(r[0].addEventListener("mouseover",function(){var e=document.getElementById("neets-menu");e&&(e.style.display="inline-block")},!1),r[0].addEventListener("mouseout",function(){var e=document.getElementById("neets-menu");e&&(e.style.display="none")},!1))}}()}();